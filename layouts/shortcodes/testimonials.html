<div class="block-item content-main" id="testimonials">
    <div class="block-container container">
        <div class="columns is-multiline">
            {{ range $index, $testimonial := .Site.Data.testimonials }}
            <div class="column is-4-desktop is-6-tablet pricing-item testimonial-item">
                <div class="card mb-5">
                    <div class="card-content">
                        <h5 class="card-header-title mb-2 has-text-left">{{ $testimonial.name }}</h5>
                        <div class="mb-2">
                            {{ $stars := $testimonial.stars }}
                            {{ range seq 1 5 }}
                                {{ if le . $stars }}
                                    <i class="fa fa-star has-text-warning"></i>
                                {{ end }}
                            {{ end }}
                        </div>
                        
                        <div class="content testim-text testim-limited"><cite>{{ $testimonial.text }}</cite></div>
                        <a href="#" class="read-more-link" style="display:none;"
                            onclick="toggleTestimonial(this); return false;">Show more</a>
                        <div class="testim-date">{{ $testimonial.date }}</div>
                    </div>
                </div>
            </div>
            {{ end }}
        </div>

        <div class="columns mt-5">
            <div class="column has-text-centered">
                <a class="button is-light mr-2" href="https://dbgate.io/testimonials" target="_blank">View more</a>
                <a class="button is-light mr-2" href="https://www.producthunt.com/products/dbgate" target="_blank">ProductHunt</a>
                <a class="button is-light mr-2" href="https://testimonial.to/dbgate" target="_blank">Testimonials.to</a>
                <a class="button is-light" href="https://www.g2.com/products/dbgate/reviews" target="_blank">G2</a>
            </div>
        </div>

    </div>
</div>

<style>
    .testim-limited {
        max-height: 4.5em;
        overflow: hidden;
        position: relative;
    }
    
    .testim-limited::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 1.5em;
        background: linear-gradient(transparent, white);
        pointer-events: none;
    }
    
    .read-more-link {
        color: #188eac;
        text-decoration: none;
        font-size: 0.9em;
        margin-top: 0.5rem;
        display: inline-block;
    }
    
    .read-more-link:hover {
        text-decoration: underline;
    }
    
    .testim-date {
        color: #666;
        font-size: 0.85em;
        margin-top: 0.75rem;
        font-style: italic;
    }
</style>

<script>
    function toggleTestimonial(link) {
        const text = link.previousElementSibling;
        text.classList.toggle('testim-limited');
        link.textContent = text.classList.contains('testim-limited') ? 'Show more' : 'Show less';
    }

    function initializeTestimonialLinks() {
        document.querySelectorAll('.testim-text').forEach(function (textElem) {
            var link = textElem.nextElementSibling;
            if (textElem.scrollHeight > textElem.clientHeight) {
                link.style.display = '';
            }
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initializeTestimonialLinks();
    });
</script>